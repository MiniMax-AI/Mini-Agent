# Mini-Agent å·¥ä½œæµç¨‹å›¾

## 1. æ•´ä½“æ¶æ„æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Mini-Agent å¯åŠ¨æµç¨‹                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ç”¨æˆ·å‘½ä»¤è¡Œå¯åŠ¨
        â”‚
        â”œâ”€â†’ mini-agent --workspace /path/to/dir
        â”‚
        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   cli.py:main()  â”‚  è§£æå‘½ä»¤è¡Œå‚æ•°
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      1. åŠ è½½é…ç½® (config.py)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ä¼˜å…ˆçº§æœç´¢:                                                              â”‚
â”‚  â‘  ./mini_agent/config/config.yaml  (å¼€å‘æ¨¡å¼)                           â”‚
â”‚  â‘¡ ~/.mini-agent/config/config.yaml (ç”¨æˆ·é…ç½®)                           â”‚
â”‚  â‘¢ <package>/config/config.yaml     (å·²å®‰è£…åŒ…)                           â”‚
â”‚                                                                          â”‚
â”‚  é…ç½®å†…å®¹:                                                                â”‚
â”‚  â€¢ api_key, api_base, model                                             â”‚
â”‚  â€¢ provider (anthropic/openai)                                          â”‚
â”‚  â€¢ max_steps, token_limit                                               â”‚
â”‚  â€¢ tools å¯ç”¨/ç¦ç”¨å¼€å…³                                                    â”‚
â”‚  â€¢ retry é…ç½®                                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                  2. åˆå§‹åŒ– LLM å®¢æˆ·ç«¯ (llm_wrapper.py)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  æ ¹æ® provider åˆ›å»ºå®¢æˆ·ç«¯:                                                â”‚
â”‚  â€¢ AnthropicClient (Messages API)                                       â”‚
â”‚  â€¢ OpenAIClient (Chat Completions API)                                  â”‚
â”‚                                                                          â”‚
â”‚  é…ç½®é‡è¯•æœºåˆ¶:                                                            â”‚
â”‚  â€¢ æŒ‡æ•°é€€é¿ (exponential backoff)                                        â”‚
â”‚  â€¢ æœ€å¤§é‡è¯•æ¬¡æ•°                                                           â”‚
â”‚  â€¢ é‡è¯•å›è°ƒ (ç»ˆç«¯æ˜¾ç¤º)                                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                       3. åŠ è½½å·¥å…· (Tools)                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  3.1 åŸºç¡€å·¥å…· (ä¸å·¥ä½œç©ºé—´æ— å…³)                                             â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚      â”‚ Claude Skills (skills/)              â”‚                           â”‚
â”‚      â”‚  â€¢ Progressive Disclosure Level 1    â”‚                           â”‚
â”‚      â”‚  â€¢ å…ƒæ•°æ®åŠ è½½ (åç§°ã€æè¿°)            â”‚                           â”‚
â”‚      â”‚  â€¢ get_skill å·¥å…·æ³¨å†Œ                â”‚                           â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚      â”‚ MCP å·¥å…· (mcp.json)                  â”‚                           â”‚
â”‚      â”‚  â€¢ memory (çŸ¥è¯†å›¾è°±)                 â”‚                           â”‚
â”‚      â”‚  â€¢ minimax_search (ç½‘é¡µæœç´¢)         â”‚                           â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚                                                                          â”‚
â”‚  3.2 å·¥ä½œç©ºé—´å·¥å…· (ä¸å·¥ä½œç©ºé—´ç›¸å…³)                                          â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚      â”‚ æ–‡ä»¶å·¥å…· (file_tools.py)             â”‚                           â”‚
â”‚      â”‚  â€¢ ReadTool  - è¯»å–æ–‡ä»¶              â”‚                           â”‚
â”‚      â”‚  â€¢ WriteTool - å†™å…¥æ–‡ä»¶              â”‚                           â”‚
â”‚      â”‚  â€¢ EditTool  - ç¼–è¾‘æ–‡ä»¶              â”‚                           â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚      â”‚ Bash å·¥å…· (bash_tool.py)             â”‚                           â”‚
â”‚      â”‚  â€¢ BashTool       - æ‰§è¡Œå‘½ä»¤         â”‚                           â”‚
â”‚      â”‚  â€¢ BashOutputTool - è¯»å–è¾“å‡º         â”‚                           â”‚
â”‚      â”‚  â€¢ BashKillTool   - ç»ˆæ­¢è¿›ç¨‹         â”‚                           â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚      â”‚ ä¼šè¯ç¬”è®° (note_tool.py)              â”‚                           â”‚
â”‚      â”‚  â€¢ SessionNoteTool - æŒä¹…åŒ–è®°å¿†      â”‚                           â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â”‚      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                           â”‚
â”‚      â”‚ æœç´¢å·¥å…· (glm_search_tool.py)        â”‚                           â”‚
â”‚      â”‚  â€¢ GLMSearchTool - ç½‘é¡µæœç´¢          â”‚                           â”‚
â”‚      â”‚  â€¢ GLMBatchSearchTool - æ‰¹é‡æœç´¢     â”‚                           â”‚
â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 4. å‡†å¤‡ System Prompt (system_prompt.md)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  4.1 åŠ è½½åŸºç¡€ System Prompt                                              â”‚
â”‚      â†“                                                                   â”‚
â”‚  4.2 æ³¨å…¥ Skills å…ƒæ•°æ® ({SKILLS_METADATA})                              â”‚
â”‚      â†“                                                                   â”‚
â”‚  4.3 æ³¨å…¥å·¥ä½œç©ºé—´ä¿¡æ¯ (agent.py:64-66)                                    â”‚
â”‚      "## Current Workspace                                               â”‚
â”‚       You are currently working in: /path/to/workspace"                 â”‚
â”‚      â†“                                                                   â”‚
â”‚  4.4 æ³¨å…¥å½“å‰æ—¶é—´ (agent.py:69-71) âœ¨ NEW                                â”‚
â”‚      "## Current Date and Time                                           â”‚
â”‚       Current date and time: 2025-11-17 09:05:37 (Monday)"              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     5. åˆ›å»º Agent å®ä¾‹ (agent.py)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Agent(                                                                  â”‚
â”‚    llm_client=llm_client,                                               â”‚
â”‚    system_prompt=system_prompt,  # å·²æ³¨å…¥æ‰€æœ‰ä¸Šä¸‹æ–‡                       â”‚
â”‚    tools=tools,                  # æ‰€æœ‰åŠ è½½çš„å·¥å…·                         â”‚
â”‚    max_steps=100,                # æœ€å¤§æ‰§è¡Œæ­¥æ•°                           â”‚
â”‚    workspace_dir=workspace_dir,  # å·¥ä½œç›®å½•                              â”‚
â”‚    token_limit=80000             # Token é™åˆ¶                            â”‚
â”‚  )                                                                       â”‚
â”‚                                                                          â”‚
â”‚  åˆå§‹åŒ–:                                                                  â”‚
â”‚  â€¢ messages = [system_message]   # æ¶ˆæ¯å†å²                              â”‚
â”‚  â€¢ logger = AgentLogger()        # æ—¥å¿—ç³»ç»Ÿ                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        6. è¿›å…¥äº¤äº’å¾ªç¯ (cli.py)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚
         â””â”€â”€â†’ (è§ä¸‹æ–¹è¯¦ç»†æµç¨‹)
```

---

## 2. Agent æ‰§è¡Œå¾ªç¯è¯¦ç»†æµç¨‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          Agent.run() æ‰§è¡Œå¾ªç¯                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

    ç”¨æˆ·è¾“å…¥ (prompt_toolkit)
         â”‚
         â”œâ”€â†’ "å¸®æˆ‘åˆ›å»ºä¸€ä¸ª Python è„šæœ¬"
         â”‚
         â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ agent.add_user_   â”‚  æ·»åŠ ç”¨æˆ·æ¶ˆæ¯åˆ°å†å²
  â”‚    message()      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                    Agent.run() å¼€å§‹                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
            â”‚
            â”‚  step = 0
            â”‚
  â•”â•â•â•â•â•â•â•â•â•â•§â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘         LOOP: while step < max_steps (é»˜è®¤ 100)                   â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            â”‚
            â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Step 1: æ£€æŸ¥ Token é™åˆ¶ (_estimate_tokens)                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  ä½¿ç”¨ tiktoken (cl100k_base) è®¡ç®—å½“å‰æ¶ˆæ¯å†å² token æ•°             â”‚
  â”‚                                                                   â”‚
  â”‚  if tokens > token_limit (80000):                                â”‚
  â”‚     â–¼                                                             â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                 â”‚
  â”‚  â”‚   è§¦å‘æ‘˜è¦ (_summarize_messages)            â”‚                 â”‚
  â”‚  â”‚   â€¢ ä¿ç•™æ‰€æœ‰ user æ¶ˆæ¯                      â”‚                 â”‚
  â”‚  â”‚   â€¢ æ‘˜è¦æ¯è½®æ‰§è¡Œè¿‡ç¨‹                        â”‚                 â”‚
  â”‚  â”‚   â€¢ è°ƒç”¨ LLM ç”Ÿæˆç®€æ´æ‘˜è¦                   â”‚                 â”‚
  â”‚  â”‚   â€¢ æ›¿æ¢åŸæ¶ˆæ¯åˆ—è¡¨                          â”‚                 â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Step 2: è°ƒç”¨ LLM (llm_client.generate)                          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  è¯·æ±‚å†…å®¹:                                                         â”‚
  â”‚  â€¢ messages: å®Œæ•´æ¶ˆæ¯å†å²                                          â”‚
  â”‚  â€¢ tools: å·¥å…·åˆ—è¡¨ (JSON Schema)                                  â”‚
  â”‚                                                                   â”‚
  â”‚  LLM å¤„ç†:                                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
  â”‚  â”‚  Provider: Anthropic or OpenAI     â”‚                          â”‚
  â”‚  â”‚  â†“                                 â”‚                          â”‚
  â”‚  â”‚  API è¯·æ±‚ (httpx.AsyncClient)      â”‚                          â”‚
  â”‚  â”‚  â†“                                 â”‚                          â”‚
  â”‚  â”‚  é‡è¯•æœºåˆ¶ (å¦‚æœå¤±è´¥)                â”‚                          â”‚
  â”‚  â”‚  â€¢ æŒ‡æ•°é€€é¿                         â”‚                          â”‚
  â”‚  â”‚  â€¢ ç»ˆç«¯æ˜¾ç¤ºé‡è¯•ä¿¡æ¯                 â”‚                          â”‚
  â”‚  â”‚  â†“                                 â”‚                          â”‚
  â”‚  â”‚  å“åº”è§£æ                           â”‚                          â”‚
  â”‚  â”‚  â€¢ content (æ–‡æœ¬å“åº”)              â”‚                          â”‚
  â”‚  â”‚  â€¢ thinking (æ€è€ƒè¿‡ç¨‹)             â”‚                          â”‚
  â”‚  â”‚  â€¢ tool_calls (å·¥å…·è°ƒç”¨åˆ—è¡¨)       â”‚                          â”‚
  â”‚  â”‚  â€¢ finish_reason                   â”‚                          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Step 3: å¤„ç†å“åº”                                                 â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  â€¢ è®°å½•æ—¥å¿— (logger.log_response)                                 â”‚
  â”‚  â€¢ æ·»åŠ  assistant æ¶ˆæ¯åˆ°å†å²                                       â”‚
  â”‚  â€¢ åœ¨ç»ˆç«¯æ‰“å° thinking (å¦‚æœæœ‰)                                    â”‚
  â”‚  â€¢ åœ¨ç»ˆç«¯æ‰“å° content                                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Step 4: æ£€æŸ¥æ˜¯å¦æœ‰å·¥å…·è°ƒç”¨                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”‚  if NO tool_calls:
           â”‚     â””â”€â†’ ä»»åŠ¡å®Œæˆ,è¿”å› content âœ“
           â”‚
           â”‚  if tool_calls exist:
           â”‚     â””â”€â†’ ç»§ç»­æ‰§è¡Œå·¥å…·
           â”‚
           â–¼
  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘         LOOP: for each tool_call in tool_calls                    â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            â”‚
            â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Step 5: æ‰§è¡Œå•ä¸ªå·¥å…·è°ƒç”¨                                         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  è§£æ:                                                            â”‚
  â”‚  â€¢ tool_call_id                                                  â”‚
  â”‚  â€¢ function_name (å¦‚: "read_file")                               â”‚
  â”‚  â€¢ arguments (å¦‚: {"file_path": "test.py"})                      â”‚
  â”‚                                                                  â”‚
  â”‚  åœ¨ç»ˆç«¯æ‰“å°:                                                       â”‚
  â”‚  ğŸ”§ Tool Call: read_file                                         â”‚
  â”‚     Arguments:                                                   â”‚
  â”‚     {                                                            â”‚
  â”‚       "file_path": "test.py"                                     â”‚
  â”‚     }                                                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Step 6: æŸ¥æ‰¾å¹¶æ‰§è¡Œå·¥å…·                                           â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  if function_name not in tools:                                  â”‚
  â”‚     result = ToolResult(error="Unknown tool")                    â”‚
  â”‚  else:                                                           â”‚
  â”‚     try:                                                         â”‚
  â”‚        tool = tools[function_name]                               â”‚
  â”‚        result = await tool.execute(**arguments)                  â”‚
  â”‚     except Exception as e:                                       â”‚
  â”‚        result = ToolResult(error=str(e))                         â”‚
  â”‚                                                                  â”‚
  â”‚  å·¥å…·æ‰§è¡Œç¤ºä¾‹:                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
  â”‚  â”‚  ReadTool.execute(file_path)       â”‚                          â”‚
  â”‚  â”‚    â†“                               â”‚                          â”‚
  â”‚  â”‚  è§£æè·¯å¾„ (ç»å¯¹/ç›¸å¯¹)               â”‚                          â”‚
  â”‚  â”‚    â†“                               â”‚                          â”‚
  â”‚  â”‚  è¯»å–æ–‡ä»¶å†…å®¹                       â”‚                          â”‚
  â”‚  â”‚    â†“                               â”‚                          â”‚
  â”‚  â”‚  è¿”å› ToolResult(                  â”‚                          â”‚
  â”‚  â”‚    success=True,                   â”‚                          â”‚
  â”‚  â”‚    content="æ–‡ä»¶å†…å®¹..."           â”‚                          â”‚
  â”‚  â”‚  )                                 â”‚                          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Step 7: å¤„ç†å·¥å…·ç»“æœ                                             â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  â€¢ è®°å½•æ—¥å¿— (logger.log_tool_result)                              â”‚
  â”‚  â€¢ åœ¨ç»ˆç«¯æ‰“å°ç»“æœ:                                                 â”‚
  â”‚    âœ“ Result: æ–‡ä»¶å†…å®¹... (æˆåŠŸ)                                   â”‚
  â”‚    âœ— Error: xxx (å¤±è´¥)                                           â”‚
  â”‚  â€¢ æ·»åŠ  tool æ¶ˆæ¯åˆ°å†å²:                                           â”‚
  â”‚    Message(                                                      â”‚
  â”‚      role="tool",                                                â”‚
  â”‚      content=result.content or f"Error: {result.error}",         â”‚
  â”‚      tool_call_id=tool_call_id,                                  â”‚
  â”‚      name=function_name                                          â”‚
  â”‚    )                                                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â””â”€â†’ ç»§ç»­ä¸‹ä¸€ä¸ª tool_call (å¦‚æœæœ‰)

  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘              END LOOP: all tool_calls processed                   â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            â”‚
            â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  Step 8: å¢åŠ æ­¥æ•°è®¡æ•°                                             â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  step += 1                                                       â”‚
  â”‚                                                                  â”‚
  â”‚  å›åˆ°å¾ªç¯å¼€å§‹ (Step 1)                                            â”‚
  â”‚  â€¢ LLM çœ‹åˆ°æ–°çš„ tool æ¶ˆæ¯                                         â”‚
  â”‚  â€¢ ç»§ç»­ç”Ÿæˆä¸‹ä¸€æ­¥å“åº”                                              â”‚
  â”‚  â€¢ å¯èƒ½å†æ¬¡è°ƒç”¨å·¥å…·æˆ–å®Œæˆä»»åŠ¡                                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
  â•‘         END LOOP: task complete or max_steps reached              â•‘
  â•šâ•â•â•â•â•â•â•â•â•â•¤â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
            â”‚
            â–¼
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚  è¿”å›æœ€ç»ˆç»“æœ                                                      â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚  â€¢ æˆåŠŸ: è¿”å› LLM çš„æœ€ç»ˆ content                                  â”‚
  â”‚  â€¢ è¶…æ—¶: è¿”å› "Task couldn't be completed after N steps"         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. æ¶ˆæ¯å†å²ç»“æ„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           messages æ•°ç»„ç»“æ„                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  [0] Message(role="system", content=system_prompt)                      â”‚
â”‚       â†‘                                                                  â”‚
â”‚       â””â”€ åŒ…å«: èº«ä»½ã€èƒ½åŠ›ã€å·¥å…·åˆ—è¡¨ã€å·¥ä½œç©ºé—´ã€å½“å‰æ—¶é—´                     â”‚
â”‚                                                                          â”‚
â”‚  [1] Message(role="user", content="ç”¨æˆ·è¯·æ±‚")                            â”‚
â”‚                                                                          â”‚
â”‚  [2] Message(role="assistant",                                          â”‚
â”‚              content="æˆ‘ä¼šå¸®ä½ ...",                                      â”‚
â”‚              thinking="æ€è€ƒè¿‡ç¨‹...",                                     â”‚
â”‚              tool_calls=[ToolCall(...)])                                â”‚
â”‚                                                                          â”‚
â”‚  [3] Message(role="tool",                                               â”‚
â”‚              content="å·¥å…·è¿”å›ç»“æœ",                                      â”‚
â”‚              tool_call_id="call_123",                                   â”‚
â”‚              name="read_file")                                          â”‚
â”‚                                                                          â”‚
â”‚  [4] Message(role="assistant",                                          â”‚
â”‚              content="æ ¹æ®æ–‡ä»¶å†…å®¹...",                                   â”‚
â”‚              tool_calls=[ToolCall(...)])                                â”‚
â”‚                                                                          â”‚
â”‚  [5] Message(role="tool", ...)                                          â”‚
â”‚                                                                          â”‚
â”‚  ...                                                                     â”‚
â”‚                                                                          â”‚
â”‚  å½“ tokens > 80000 æ—¶,è§¦å‘æ‘˜è¦:                                          â”‚
â”‚  â†“                                                                       â”‚
â”‚  [0] system                                                              â”‚
â”‚  [1] user è¯·æ±‚ 1                                                         â”‚
â”‚  [2] user "[Summary] æ‰§è¡Œè¿‡ç¨‹æ‘˜è¦..."  â† æ›¿ä»£åŸæ¥çš„å¤šä¸ª assistant/tool   â”‚
â”‚  [3] user è¯·æ±‚ 2                                                         â”‚
â”‚  [4] user "[Summary] ..."                                               â”‚
â”‚  ...                                                                     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 4. å·¥å…·è°ƒç”¨æœºåˆ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           å·¥å…·ç³»ç»Ÿæ¶æ„                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

                             Tool åŸºç±»
                         (tools/base.py)
                               â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â”‚                â”‚                â”‚
              â–¼                â–¼                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ ReadTool â”‚    â”‚ BashTool â”‚    â”‚ SkillToolâ”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                â”‚                â”‚
              â”‚                â”‚                â”‚
              â–¼                â–¼                â–¼

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  æ‰€æœ‰å·¥å…·å¿…é¡»å®ç°çš„æ¥å£:                                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  class Tool(ABC):                                                       â”‚
â”‚      @property                                                           â”‚
â”‚      def name(self) -> str:                                             â”‚
â”‚          """å·¥å…·åç§°,å¦‚ 'read_file'"""                                    â”‚
â”‚                                                                          â”‚
â”‚      @property                                                           â”‚
â”‚      def description(self) -> str:                                      â”‚
â”‚          """å·¥å…·æè¿°,å‘Šè¯‰ LLM ä½•æ—¶ä½¿ç”¨"""                                  â”‚
â”‚                                                                          â”‚
â”‚      @property                                                           â”‚
â”‚      def parameters(self) -> dict:                                      â”‚
â”‚          """JSON Schema,å®šä¹‰å‚æ•°æ ¼å¼"""                                   â”‚
â”‚                                                                          â”‚
â”‚      async def execute(self, **kwargs) -> ToolResult:                   â”‚
â”‚          """æ‰§è¡Œå·¥å…·é€»è¾‘"""                                                â”‚
â”‚                                                                          â”‚
â”‚      def to_schema(self) -> dict:                                       â”‚
â”‚          """è½¬æ¢ä¸º Anthropic æ ¼å¼"""                                      â”‚
â”‚                                                                          â”‚
â”‚      def to_openai_schema(self) -> dict:                                â”‚
â”‚          """è½¬æ¢ä¸º OpenAI æ ¼å¼"""                                         â”‚
â”‚                                                                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å·¥å…·è°ƒç”¨æµç¨‹:

  LLM å†³å®šè°ƒç”¨å·¥å…·
         â”‚
         â”œâ”€â†’ tool_calls = [
         â”‚      {
         â”‚        "id": "call_abc123",
         â”‚        "function": {
         â”‚          "name": "read_file",
         â”‚          "arguments": {"file_path": "test.py"}
         â”‚        }
         â”‚      }
         â”‚   ]
         â”‚
         â–¼
  Agent æŸ¥æ‰¾å·¥å…·
         â”‚
         â”œâ”€â†’ tool = tools["read_file"]
         â”‚
         â–¼
  æ‰§è¡Œå·¥å…·
         â”‚
         â”œâ”€â†’ result = await tool.execute(file_path="test.py")
         â”‚
         â–¼
  è¿”å›ç»“æœ
         â”‚
         â””â”€â†’ ToolResult(
               success=True,
               content="æ–‡ä»¶å†…å®¹...",
               error=None
             )
```

---

## 5. Skills æ¸è¿›å¼æŠ«éœ²æœºåˆ¶

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      Claude Skills æ¸è¿›å¼åŠ è½½                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Level 1: å¯åŠ¨æ—¶åŠ è½½å…ƒæ•°æ®
         â”‚
         â”œâ”€â†’ skill_loader.get_skills_metadata_prompt()
         â”‚   â†“
         â”‚   è¿”å›æ‰€æœ‰ skills çš„ç®€è¦ä¿¡æ¯:
         â”‚   "Available Skills:
         â”‚    - pdf: Create and manipulate PDF files
         â”‚    - pptx: Create PowerPoint presentations
         â”‚    - testing: Advanced testing patterns
         â”‚    ..."
         â”‚
         â”‚   æ³¨å…¥åˆ° system_prompt çš„ {SKILLS_METADATA}
         â”‚
         â–¼
  Level 2: æŒ‰éœ€åŠ è½½å®Œæ•´å†…å®¹
         â”‚
         â”œâ”€â†’ LLM å†³å®š: "æˆ‘éœ€è¦ pdf skill"
         â”‚   â†“
         â”‚   è°ƒç”¨å·¥å…·: get_skill(skill_name="pdf")
         â”‚   â†“
         â”‚   skill_loader.get_skill_content("pdf")
         â”‚   â†“
         â”‚   è¿”å›å®Œæ•´çš„ skill æŒ‡å¯¼æ–‡æ¡£ (markdown)
         â”‚   åŒ…å«: è¯¦ç»†è¯´æ˜ã€ç¤ºä¾‹ã€æœ€ä½³å®è·µ
         â”‚
         â–¼
  Level 3+: è®¿é—®é¢å¤–èµ„æº
         â”‚
         â”œâ”€â†’ Skill æ–‡æ¡£ä¸­å¼•ç”¨è„šæœ¬/æ¨¡æ¿
         â”‚   â†“
         â”‚   LLM ä½¿ç”¨ read_file è¯»å–:
         â”‚   "skills/pdf/examples/create_invoice.py"
         â”‚   â†“
         â”‚   è·å–ç¤ºä¾‹ä»£ç å¹¶åº”ç”¨åˆ°å½“å‰ä»»åŠ¡
         â”‚
         â–¼
  æ‰§è¡Œä»»åŠ¡
         â”‚
         â””â”€â†’ ä½¿ç”¨ bash/file å·¥å…·æ‰§è¡Œ skill æŒ‡å¯¼çš„æ“ä½œ
```

---

## 6. æ—¥å¿—ç³»ç»Ÿ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AgentLogger (logger.py)                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚  æ¯æ¬¡ agent.run() åˆ›å»ºæ–°çš„æ—¥å¿—æ–‡ä»¶:                                       â”‚
â”‚  workspace/agent_YYYYMMDD_HHMMSS.log                                    â”‚
â”‚                                                                          â”‚
â”‚  è®°å½•å†…å®¹:                                                                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                         â”‚
â”‚  â”‚ [2025-11-17 09:05:37] RUN START           â”‚                         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
â”‚  â”‚ [REQUEST] Step 1                           â”‚                         â”‚
â”‚  â”‚   Messages: 2 messages                     â”‚                         â”‚
â”‚  â”‚   Tools: read_file, write_file, ...        â”‚                         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
â”‚  â”‚ [RESPONSE]                                 â”‚                         â”‚
â”‚  â”‚   Content: I'll help you...                â”‚                         â”‚
â”‚  â”‚   Thinking: Let me analyze...              â”‚                         â”‚
â”‚  â”‚   Tool Calls: 1 calls                      â”‚                         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
â”‚  â”‚ [TOOL] read_file                           â”‚                         â”‚
â”‚  â”‚   Arguments: {file_path: "test.py"}        â”‚                         â”‚
â”‚  â”‚   Result: SUCCESS                          â”‚                         â”‚
â”‚  â”‚   Content: (å‰ 500 å­—ç¬¦)                   â”‚                         â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                         â”‚
â”‚  â”‚ [REQUEST] Step 2                           â”‚                         â”‚
â”‚  â”‚   ...                                      â”‚                         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                         â”‚
â”‚                                                                          â”‚
â”‚  ç”¨é€”:                                                                    â”‚
â”‚  â€¢ è°ƒè¯• LLM è¡Œä¸º                                                          â”‚
â”‚  â€¢ è¿½è¸ªå·¥å…·è°ƒç”¨å†å²                                                        â”‚
â”‚  â€¢ åˆ†æ token ä½¿ç”¨                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7. å®Œæ•´äº¤äº’ç¤ºä¾‹

```
ç”¨æˆ·: "å¸®æˆ‘åˆ›å»ºä¸€ä¸ª hello.py æ–‡ä»¶,æ‰“å° 'Hello World'"

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 1/100                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ ğŸ’­ Thinking:                                                            â”‚
â”‚ ç”¨æˆ·æƒ³åˆ›å»ºä¸€ä¸ªç®€å•çš„ Python è„šæœ¬ã€‚æˆ‘éœ€è¦ä½¿ç”¨ write_file å·¥å…·ã€‚            â”‚
â”‚                                                                          â”‚
â”‚ ğŸ¤– Assistant:                                                           â”‚
â”‚ æˆ‘ä¼šå¸®ä½ åˆ›å»º hello.py æ–‡ä»¶ã€‚                                             â”‚
â”‚                                                                          â”‚
â”‚ ğŸ”§ Tool Call: write_file                                                â”‚
â”‚    Arguments:                                                            â”‚
â”‚    {                                                                     â”‚
â”‚      "file_path": "hello.py",                                           â”‚
â”‚      "content": "print('Hello World')"                                  â”‚
â”‚    }                                                                     â”‚
â”‚                                                                          â”‚
â”‚ âœ“ Result: File written successfully to /workspace/hello.py             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Step 2/100                                                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                          â”‚
â”‚ ğŸ¤– Assistant:                                                           â”‚
â”‚ å·²ç»ä¸ºä½ åˆ›å»ºäº† hello.py æ–‡ä»¶,åŒ…å«æ‰“å° "Hello World" çš„ä»£ç ã€‚              â”‚
â”‚ ä½ å¯ä»¥ä½¿ç”¨ `python hello.py` è¿è¡Œå®ƒã€‚                                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

å®Œæˆ! (2 æ­¥)
```

---

## æ€»ç»“

**æ ¸å¿ƒæµç¨‹**:
```
é…ç½®åŠ è½½ â†’ LLMåˆå§‹åŒ– â†’ å·¥å…·åŠ è½½ â†’ System Promptå‡†å¤‡ â†’
Agentåˆ›å»º â†’ äº¤äº’å¾ªç¯ (ç”¨æˆ·è¾“å…¥ â†’ LLMæ¨ç† â†’ å·¥å…·è°ƒç”¨ â†’ ç»“æœè¿”å›)
```

**å…³é”®ç‰¹æ€§**:
- âœ… è‡ªåŠ¨ token ç®¡ç†å’Œä¸Šä¸‹æ–‡æ‘˜è¦
- âœ… æ¸è¿›å¼æŠ€èƒ½åŠ è½½
- âœ… å®Œæ•´çš„é‡è¯•æœºåˆ¶
- âœ… è¯¦ç»†çš„æ—¥å¿—è®°å½•
- âœ… å¤š LLM æä¾›å•†æ”¯æŒ
- âœ… å·¥ä½œç©ºé—´å’Œæ—¶é—´ä¸Šä¸‹æ–‡æ„ŸçŸ¥ (æ–°å¢)
